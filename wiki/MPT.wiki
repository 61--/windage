== Introduction ==

The MPT (pronounced “Empty” or “Empty Box”) supplies cross-platform libraries for real-time perception primitives, including face detection, eye detection, blink detection, color tracking.


== To Build on Windows (Visual C++) ==
=== Configuring and installing the MPT environment ===
 1. Ensure that visual studio is not currently open
 1. Edit registry to allow visual studio to compile and dea with .cc files
  (go to *<MPT>\Libraries\mpisearch\windows* and double click cc.reg.)
 1. Download and Install DirectX 9.0 SDK from Microsoft (only needed for filters)
  * At now DirectShow(filters) is in Windows SDK
  1. Download from http://www.microsoft.com/downloads
  1. Go to *<DXSDK>\SAMPLES\C++\DirectShow\BASECLASSES* or *<WindowsSDK>\SAMPLES\Multimedia\DirectShow\BASECLASSES* and open baseclasses.dsw using Visual C++
  1. Build the baseclasses
 1. Add DirectShow libs and includes to Visual C++
  1. Open Visual C++
  1. Go to Tools -> Options -> Directories (Include Files)
   1. Add *<DXSDK>\Include* or *<WindowsSDK>\Include* and _move it to the top of the list_
   1. Add *<DXSDKSAMPLES\C++\DirectShow\BASECLASSES* or * <WindosSDK>\SAMPLES\Multimedia\DirectShow\BASECLASSES* and _move it below the top item in the list_
  1. Directories (Library Files)
   1. Add *<DXSDK>\lib* or *<WindowsSDK>\lib* and _move it to the top of the list_
   1. Add *<DXSDK>\SAMPLES\C++\DirectShow\BASECLASSES\Release* or * <WindosSDK>\SAMPLES\Multimedia\DirectShow\BASECLASSES\Release* and _move it below the second item in the list_

=== Building the MPT Project ===
 1. Mpisearch : Ablack and white, real time, frontal face finder using a Viola and jones syle approach.
 1. Eyefinder : an eedetector based on the mpisearch face detector
 1. Blinkdetector : Real time blink detection.
 1. Colortracker : A very face face tracker based on simple color features adapted based on information from a face detector running in parallel.
 1. MPutil : Utilites used to make code wokrk across multiple platforms
 * The projects are located on directories of the from *<MPT>\Librries\project_name\windows*

=== Running the Projects ===
 1. Go to directory *<MPT>\Libraries\project_name\windows\bin* 
 1. Click on *CHANGETO_release.cmd*. This registers the active X control and copies the appropriate executableinto the bin directory
 * if you want to use debug mode then build DirectShow and MPT Project on debug mode and Click on *CHANGETO_debug.cmd*


== To Use colortracker ==
 * at 240 line in DoSearch function in MPColorTracker.cpp file
{{{
int MPColorTracker::DoSearch() {
... skip ...
	//finish the calculation of colortracking at this position
	int lefttopX = m_mBox.x;
	int lefttopY = m_mBox.y;
	int centerX = m_mBox.x + m_mBox.size/2;
	int centerY = m_mBox.y + m_mBox.size/2;

	/* set per pixel liklihoods */
	likrat /= (m_mBox.size * m_mBox.size);// * featureWidth/featureHeight); /* compute likelihood per pixel */
... skip ...
	//	m_results.y2 = m_results.y1 + (bBoxHeight-1);
	/* *********** deal with this subtraction!!! ************** */

	//finisi the calculation of smoothing
	int lefttopX = result.x1;
	int lefttopY = result.y1;
	int rightbottomX = result.x2;
	int rightbottomY = result.y2;
... skip ...
}
}}}
 * range of variables (if input image size is 320x240)
  * 0 <= x <= 160
  * 0 <= y <= 120
   * default MPT is downsampling at twice